<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>WB CC Break Tracker</title>
<link href="css/index.css" rel="stylesheet">
<script>
document.addEventListener('DOMContentLoaded', function(event)
{
   var shapePath = document.querySelector('#MorphingIcon1-shape');
   var paths = ["M210 0 L419 162 L210 324 L0 162Z "];
   var interpolator = [];
   interpolator[0] = polymorph.interpolate([paths[0], paths[0]]);
   let progress = { prop: 0 };
   var pathIndex = 0;
   anime({
      targets: progress,
      prop: 1,
      delay: 0,
      duration: 2000,
      easing: 'linear',
      loop: true,
      direction: 'normal',
      update(anim) 
      {
         shapePath.setAttribute('d', interpolator[pathIndex](progress.prop));
         if (anim.progress == 100)
         {
            pathIndex++;
            if (pathIndex > 0)
               pathIndex = 0;
         }
      }
   });
});

document.addEventListener('DOMContentLoaded', function(event)
{
   var shapePath = document.querySelector('#MorphingIcon2-shape');
   var paths = ["M210 0 L419 162 L210 324 L0 162Z "];
   var interpolator = [];
   interpolator[0] = polymorph.interpolate([paths[0], paths[0]]);
   let progress = { prop: 0 };
   var pathIndex = 0;
   anime({
      targets: progress,
      prop: 1,
      delay: 0,
      duration: 2000,
      easing: 'linear',
      loop: true,
      direction: 'normal',
      update(anim) 
      {
         shapePath.setAttribute('d', interpolator[pathIndex](progress.prop));
         if (anim.progress == 100)
         {
            pathIndex++;
            if (pathIndex > 0)
               pathIndex = 0;
         }
      }
   });
});

document.addEventListener('DOMContentLoaded', function(event)
{
   var shapePath = document.querySelector('#MorphingIcon3-shape');
   var paths = ["M210 0 L419 162 L210 324 L0 162Z "];
   var interpolator = [];
   interpolator[0] = polymorph.interpolate([paths[0], paths[0]]);
   let progress = { prop: 0 };
   var pathIndex = 0;
   anime({
      targets: progress,
      prop: 1,
      delay: 0,
      duration: 2000,
      easing: 'linear',
      loop: true,
      direction: 'normal',
      update(anim) 
      {
         shapePath.setAttribute('d', interpolator[pathIndex](progress.prop));
         if (anim.progress == 100)
         {
            pathIndex++;
            if (pathIndex > 0)
               pathIndex = 0;
         }
      }
   });
});

document.addEventListener('DOMContentLoaded', function(event)
{
   var shapePath = document.querySelector('#MorphingIcon4-shape');
   var paths = ["M210 0 L419 162 L210 324 L0 162Z "];
   var interpolator = [];
   interpolator[0] = polymorph.interpolate([paths[0], paths[0]]);
   let progress = { prop: 0 };
   var pathIndex = 0;
   anime({
      targets: progress,
      prop: 1,
      delay: 0,
      duration: 2000,
      easing: 'linear',
      loop: true,
      direction: 'normal',
      update(anim) 
      {
         shapePath.setAttribute('d', interpolator[pathIndex](progress.prop));
         if (anim.progress == 100)
         {
            pathIndex++;
            if (pathIndex > 0)
               pathIndex = 0;
         }
      }
   });
});

document.addEventListener('DOMContentLoaded', function(event)
{
   var shapePath = document.querySelector('#MorphingIcon5-shape');
   var paths = ["M198 0 L396 153 L198 306 L0 153Z "];
   var interpolator = [];
   interpolator[0] = polymorph.interpolate([paths[0], paths[0]]);
   let progress = { prop: 0 };
   var pathIndex = 0;
   anime({
      targets: progress,
      prop: 1,
      delay: 0,
      duration: 2000,
      easing: 'linear',
      loop: true,
      direction: 'normal',
      update(anim) 
      {
         shapePath.setAttribute('d', interpolator[pathIndex](progress.prop));
         if (anim.progress == 100)
         {
            pathIndex++;
            if (pathIndex > 0)
               pathIndex = 0;
         }
      }
   });
});

document.addEventListener('DOMContentLoaded', function(event)
{
   var shapePath = document.querySelector('#MorphingIcon6-shape');
   var paths = ["M198 0 L396 153 L198 306 L0 153Z "];
   var interpolator = [];
   interpolator[0] = polymorph.interpolate([paths[0], paths[0]]);
   let progress = { prop: 0 };
   var pathIndex = 0;
   anime({
      targets: progress,
      prop: 1,
      delay: 0,
      duration: 2000,
      easing: 'linear',
      loop: true,
      direction: 'normal',
      update(anim) 
      {
         shapePath.setAttribute('d', interpolator[pathIndex](progress.prop));
         if (anim.progress == 100)
         {
            pathIndex++;
            if (pathIndex > 0)
               pathIndex = 0;
         }
      }
   });
});


</script>
</head>

<body>
   <div id="PageHeader1" style="position:absolute;text-align:left;left:0px;top:0px;width:100%;height:105px;z-index:7777;">
      <div id="wb_Text1" style="position:absolute;left:22px;top:7px;width:100%;height:91px;text-align:center;z-index:0;">
      <span style="color:#000000;font-family:Impact;font-size:75px;"><strong>30 MINUTE BREAK TRACKER</strong></span></div>
   </div>
   <div id="main" style="position:absolute;top:0px;width:100%;height:100%;">
   <div id="wb_MorphingIcon1" style="position:absolute;left:22px;top:327px;width:419px;height:324px;z-index:3;">
      <svg id="MorphingIcon1" height="100%" width="100%" style="position:absolute;height:100%;width:100%;left:0;top:0;overflow:visible;" viewBox="0 0 419 324" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
      <path id="MorphingIcon1-shape" d="M210 0 L419 162 L210 324 L0 162Z " vector-effect="non-scaling-stroke" />
      </defs>
      <use xlink:href="#MorphingIcon1-shape" data-href="#MorphingIcon1-shape" style="fill:#FFA500;stroke:#0963AD;stroke-width:1"/>
      </svg>
   </div>
   <div id="wb_MorphingIcon2" style="position:absolute;left:529px;top:327px;width:419px;height:324px;z-index:4;">
         <svg id="MorphingIcon2" height="100%" width="100%" style="position:absolute;height:100%;width:100%;left:0;top:0;overflow:visible;" viewBox="0 0 419 324" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <defs>
               <path id="MorphingIcon2-shape" d="M210 0 L419 162 L210 324 L0 162Z " vector-effect="non-scaling-stroke" />
            </defs>
            <use xlink:href="#MorphingIcon2-shape" data-href="#MorphingIcon2-shape" style="fill:#FFA500;stroke:#0963AD;stroke-width:1"/>
         </svg>
   </div>
   <div id="wb_MorphingIcon3" style="position:absolute;left:276px;top:137px;width:419px;height:324px;z-index:5;">
      <svg id="MorphingIcon3" height="100%" width="100%" style="position:absolute;height:100%;width:100%;left:0;top:0;overflow:visible;" viewBox="0 0 419 324" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
         <defs>
            <path id="MorphingIcon3-shape" d="M210 0 L419 162 L210 324 L0 162Z " vector-effect="non-scaling-stroke" />
         </defs>
         <use xlink:href="#MorphingIcon3-shape" data-href="#MorphingIcon3-shape" style="fill:#FFA500;stroke:#0963AD;stroke-width:1"/>
      </svg>
   </div>
   <div id="wb_MorphingIcon4" style="position:absolute;left:276px;top:510px;width:419px;height:324px;z-index:6;">
      <svg id="MorphingIcon4" height="100%" width="100%" style="position:absolute;height:100%;width:100%;left:0;top:0;overflow:visible;" viewBox="0 0 419 324" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
         <defs>
            <path id="MorphingIcon4-shape" d="M210 0 L419 162 L210 324 L0 162Z " vector-effect="non-scaling-stroke" />
         </defs>
         <use xlink:href="#MorphingIcon4-shape" data-href="#MorphingIcon4-shape" style="fill:#FFA500;stroke:#0963AD;stroke-width:1"/>
      </svg>
   </div>
   <div id="wb_Text2" style="position:absolute;left:398px;top:208px;width:175px;height:21px;text-align:center;z-index:7;">
      <span style="color:#000000;font-family:Arial;font-size:19px;"><strong>TOTAL REMAINING</strong></span></div>
   <div id="wb_Text3" style="position:absolute;left:403px;top:572px;width:164px;height:21px;text-align:center;z-index:8;">
      <span style="color:#000000;font-family:Arial;font-size:19px;"><strong>CURRENT BREAK</strong></span></div>
   <div id="wb_Text4" style="position:absolute;left:171px;top:435px;width:121px;height:72px;z-index:9;">
      <span style="color:#000000;font-family:Arial;font-size:32px;"><strong>GO ON BREAK</strong></span></div>
   <div id="wb_Text5" style="position:absolute;left:669px;top:418px;width:139px;height:107px;text-align:center;z-index:10;">
      <span style="color:#000000;font-family:Arial;font-size:32px;"><strong>BACK FROM BREAK</strong></span></div>

   <div id="wb_MorphingIcon5" style="position:absolute;left:33px;top:336px;width:396px;height:306px;z-index:11;">
      <a href="#" onclick="BreakIn()">
         <svg id="MorphingIcon5" height="100%" width="100%" style="position:absolute;height:100%;width:100%;left:0;top:0;overflow:visible;" viewBox="0 0 396 306" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <defs>
             <path id="MorphingIcon5-shape" d="M198 0 L396 153 L198 306 L0 153Z " vector-effect="non-scaling-stroke" />
            </defs>
            <use xlink:href="#MorphingIcon5-shape" data-href="#MorphingIcon5-shape" style="fill:none;stroke:#008000;stroke-width:1"/>
         </svg>
      </a>
   </div>
   <div id="wb_MorphingIcon6" style="position:absolute;left:540px;top:336px;width:396px;height:306px;z-index:12;" hidden="true">
      <a href="#" onclick="BreakOut()">
         <svg id="MorphingIcon6" height="100%" width="100%" style="position:absolute;height:100%;width:100%;left:0;top:0;overflow:visible;" viewBox="0 0 396 306" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <defs>
               <path id="MorphingIcon6-shape" d="M198 0 L396 153 L198 306 L0 153Z " vector-effect="non-scaling-stroke" />
            </defs>
            <use xlink:href="#MorphingIcon6-shape" data-href="#MorphingIcon6-shape" style="fill:none;stroke:#FF0000;stroke-width:1"/>
         </svg>
      </a>
   </div>

   <div id="TotalBreak" style="position:absolute;left:356px;top:252px;width:258px;height:104px;text-align:center;z-index:13;">
      <span style="color:#000000;font-family:Impact;font-size:85px;">30:00</span></div>
   <div id="CurrentBreak" style="position:absolute;left:360px;top:623px;width:195px;height:48px;text-align:center;z-index:14;">
      <span style="color:#000000;font-family:Impact;font-size:85px;">00:00</span></div>

   <form id="breakhistory" style="position:absolute;left:700px;top:671px;width:238px;height:67px;z-index:15;"> 
    <textarea rows="5" cols="40" name="BreakHistory" spellcheck="false">
        Last Break Length
    </textarea>
   </form>
</div>
   <script>
      // turn buttons and text fields into variables
      var breakhistory = document.getElementById("breakhistory"),
           totalbreak = document.getElementById("TotalBreak"), 
           currentbreak = document.getElementById("CurrentBreak"), 
           break_in_button = document.getElementById("wb_MorphingIcon5"),
           break_out_button = document.getElementById("wb_MorphingIcon6");
      var breaklist = '', i = 1, now = null;
      var remain, mins, secs, convert_sec;
      var total_break = 1800; //30 minuntes in seconds
      

      function BreakIn(){
       now = new Date() //grab the time when button is hit
       BreakTimer(); // start counting from this time, on
       break_in_button.hidden = true;
       break_out_button.hidden = false;
      }
 
      function BreakTimer(){
       timeoutId = setTimeout(function() 
       {
         //grabs the current time, subtracts it from the time the button was clicked, updates text box, then does it again
         //this could also just be done once when "break out" was pressed but, since I wanted a timer it has to be ran every second

        current = new Date() //grab current time
        in_progress_time = new Date(current - now) //amount of time between when button was hit and now
        current_min = in_progress_time.getMinutes() //convert to minutes
        current_sec = in_progress_time.getSeconds() //convert to seconds
        if (current_min < 10) { current_min = "0" + current_min} //add a 0 before the number if its less than 10, purely for cosmetic reasons
        if (current_sec < 10) { current_sec = "0" + current_sec}
        currentbreak.innerHTML = "<span style='color:#000000;font-family:Impact;font-size:85px;'>"+current_min+":"+current_sec+"</span>"; //updates text box with elapsed time, matching the formatting
        BreakTimer();
       }, 10);
      }
 
      function BreakOut(){
         //grabs the elapsed time from the BreakTimer function and
         //1. adds it to the break history textbox list
         //2. subtracts it from the overall total of 30 minutes
         //3. resets both the current break timer and text box

       break_in_button.hidden = false;
       break_out_button.hidden = true;
 
       //add the current break duration to a list, add that list to the history text box
       breaklist += i + '. Break Duration ' + current_min + ':' + current_sec + '\n' 
       breakhistory[0].value =  breaklist
       i ++;
 
       //the process above was just grabbing what was in the minute and second positon of the time, if we want to do math with it we have to convert it to a common demoninator of seconds
       convert_sec = Math.floor(in_progress_time.getTime() * .001); //converts from miliseconds to seconds
       total_break = total_break - convert_sec; //subtracts what the total remaining break is from what has elapsed on the current break
       remain = total_break;
       //now we have to convert it back to minutes
       mins = Math.floor(remain / 60); //converts to minutes
       remain -= mins * 60; //converts the leftover to seconds
       secs = remain;

       if (mins < 10) { mins = "0" + mins; } //add a 0 before the number if its less than 10, purely for cosmetic reasons
       if (secs < 10) { secs = "0" + secs; }

       totalbreak.innerHTML= "<span style='color:#000000;font-family:Impact;font-size:85px;'> "+mins+":"+secs+" </span>";
       clearTimeout(timeoutId); //reset the timer back to 0
       currentbreak.innerHTML = "<span style='color:#000000;font-family:Impact;font-size:85px;'>00:00</span>";
      }
   </script>
</body>
</html>